<!doctype html><html lang=zh>
<head><meta http-equiv=content-type content="text/html" charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=stylesheet href="/css/main.min.603bdac5a514a018c8a598608c9559e9356dee22c6203eb4ba7ad06c438010c7.css" integrity="sha256-YDvaxaUUoBjIpZhgjJVZ6TVt7iLGID60unrQbEOAEMc=">
<link rel=preconnect href=https://fonts.googleapis.com>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Lora&display=swap" rel=stylesheet>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css>
<script src=https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/code-line></script><title>Git Solution && Notes</title>
</head>
<body class="flex flex-col bg-gray-100">
<div class="flex my-8 font-serif">
<div class="flex-auto w-1/3">
<div class="w-64 h-full mr-2 ml-auto">
<div class=mb-8><div class="border rounded-lg shadow-md">
<div class="h-32 flex rounded-t-lg text-white" style=background-image:url(/images/background-1.jpg)>
<div class=m-auto>
<div class="text-center font-serif text-3xl my-2"><a href=/>Noth</a></div>
<div class="text-center font-serif">去码头整点薯条</div>
</div>
</div>
<nav class="rounded-b-lg bg-white">
<ul class="py-2 ml-8">
<li class="my-2 content-center">
<a href=/ class=hover:text-red-300><i class="fas fa-home"></i>&nbsp;&nbsp;&nbsp;主页</a>
</li>
<li class="my-2 content-center">
<a href=/metapages/archive/ class=hover:text-red-300><i class="fas fa-scroll"></i>&nbsp;&nbsp;归档</a>
</li>
<li class="my-2 content-center">
<a href=/categories/ class=hover:text-red-300><i class="fas fa-th"></i>&nbsp;&nbsp;&nbsp;分类</a>
</li>
<li class="my-2 content-center">
<a href=/tags/ class=hover:text-red-300><i class="fas fa-tags"></i>&nbsp;&nbsp;标签</a>
</li>
<li class="my-2 content-center">
<a href=/metapages/link/ class=hover:text-red-300><i class="fas fa-link"></i>&nbsp;&nbsp;&nbsp;链接</a>
</li>
<li class="my-2 content-center">
<a href=/metapages/message/ class=hover:text-red-300><i class="fas fa-comment-alt"></i>&nbsp;&nbsp;&nbsp;留言</a>
</li>
</ul>
</nav>
</div></div>
<div class="sticky top-2">
<div class=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#一些记录>一些记录</a>
<ul>
<li><a href=#submodule-使用>submodule 使用</a></li>
</ul>
</li>
<li><a href=#一些问题和解决方案>一些问题和解决方案</a>
<ul>
<li><a href=#push总是要输密码的问题>Push总是要输密码的问题</a>
<ul>
<li><a href=#添加密钥对>添加密钥对</a></li>
<li><a href=#更改为ssh连接>更改为ssh连接</a></li>
</ul>
</li>
<li><a href=#submodule-遇到的问题>Submodule 遇到的问题</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div class="flex-auto w-2/3">
<div class="w-200 border rounded-lg bg-white ml-2 mr-auto px-4">
<h1 class="font-serif text-4xl text-center mt-8 mb-2">Git Solution && Notes</h1>
<div class="text-right text-gray-500 mr-20">
<span>
Mar. 9, 2020 |
<i class="far fa-bookmark"></i>
</span>
</div>
<div class="content px-6 mb-8">
<p>Git 使用过程遇到的问题和一些笔记，持续更新&mldr;</p>
<h2 id=一些记录>一些记录</h2>
<h3 id=submodule-使用>submodule 使用</h3>
<ul>
<li>添加一个子模块：
<ul>
<li>git submodule add <a href=https://github.com/username/repos.git>https://github.com/username/repos.git</a> path/to/dir</li>
</ul>
</li>
<li>加载子模块：
<ul>
<li>git submodule init</li>
<li>git submodule update</li>
</ul>
</li>
<li>更新子模块：
<ul>
<li>可以到子模块执行更新</li>
<li>或者：git submodule update &ndash;remote</li>
</ul>
</li>
</ul>
<h2 id=一些问题和解决方案>一些问题和解决方案</h2>
<h3 id=push总是要输密码的问题>Push总是要输密码的问题</h3>
<blockquote>
<p>后记：现在的 Git 已经可以直接使用浏览器登陆并且保存了，应该不太可能遇到这个问题了。</p>
</blockquote>
<p>换电脑后，发现很多仓库推送是总是要求输入github的账号密码，查询后的得到的结果是因为使用的是<code>https</code>clone到本地的，因为http协议的无状态性，所以需要每次都输入账号密码。
参考<a href=https://help.github.com/cn/github/using-git/which-remote-url-should-i-use>https://help.github.com/cn/github/using-git/which-remote-url-should-i-use</a></p>
<p>解决方案是更换git的方式，使用ssh来连接：</p>
<blockquote>
<p>SSH URL 通过 SSH（一种安全协议）提供 Git 仓库的访问权限。 要使用 URL，您必须在计算机上生成 SSH 密钥对，并将公钥添加到您的 GitHub 帐户。</p>
</blockquote>
<h4 id=添加密钥对>添加密钥对</h4>
<p>首先需要先检查以下本地有没有密钥，如果没有，需要生成一个：
首先在本地打开git bash输入以下命令：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ssh-keygen -t rsa -b <span style=color:#ae81ff>4096</span> -C <span style=color:#e6db74>&#34;your_email@example.com&#34;</span>
</code></pre></div><p>将邮箱地址更换为自己的地址，然后就会生成密钥对，过程中会出现三次询问，</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; Enter a file in which to save the key <span style=color:#f92672>(</span>/c/Users/you/.ssh/id_rsa<span style=color:#f92672>)</span>:<span style=color:#f92672>[</span>Press enter<span style=color:#f92672>]</span>
&gt; Enter passphrase <span style=color:#f92672>(</span>empty <span style=color:#66d9ef>for</span> no passphrase<span style=color:#f92672>)</span>: <span style=color:#f92672>[</span>Type a passphrase<span style=color:#f92672>]</span>
&gt; Enter same passphrase again: <span style=color:#f92672>[</span>Type passphrase again<span style=color:#f92672>]</span>
</code></pre></div><p>分别是要求输入保存地址和安全密码。直接按回车可以将会保存在默认路径（/c/Users/you/.ssh/id_rsa）下，为了方便可以不设置密码，也可以选择设置一个安全密码，在验证密钥对的时候会要求输入这个密码。</p>
<p>第三次回车之后会在设置的目录下生成两个文件，<code>id_rsa</code>和<code>id_rsa.pub</code>，分别保存着私钥和公钥，打开<code>id_rsa.pub</code>，复制文件内容。现在需要将公钥保存到github上。
登录github，点击头像后出现的setting，找到<code>SSH and GPG keys</code>设置选项，点击<code>New SSH key</code>，将公钥文件的内容粘贴到key里，title自己定义一个就行。</p>
<h4 id=更改为ssh连接>更改为ssh连接</h4>
<p>添加完密钥后就可以使用ssh连接了。使用<code>git remote -v</code>可以查看远程的仓库地址：</p>
<pre tabindex=0><code class=language-git data-lang=git>$ git remote -v
origin  https://github.com/YeQiu-YQ/Hexo_.git (fetch)
origin  https://github.com/YeQiu-YQ/Hexo_.git (push)
</code></pre><p>可以看到是使用https连接的，首先先删除这个远程仓库连接：</p>
<pre tabindex=0><code class=language-git data-lang=git>$ git remote rm origin
</code></pre><p>此时再验证就没有连接了，然后添加新的方式：</p>
<pre tabindex=0><code class=language-git data-lang=git>$ git remote add origin git@github.com:YeQiu-YQ/seeasy.git
$ git remote -v
origin  git@github.com:YeQiu-YQ/Hexo_.git (fetch)
origin  git@github.com:YeQiu-YQ/Hexo_.git (push)
</code></pre><p>可以看到修改完成了。
修改之后第一次推送可能需要设置一下分支：</p>
<p>$ git push &ndash;set-upstream origin master</p>
<p>或者指定分支：</p>
<p>$ git push origin master</p>
<h3 id=submodule-遇到的问题>Submodule 遇到的问题</h3>
<p>起因是为了方便管理Hexo的主题，我将其单独放到了github上。这是就出现了一个问题，我的Hexo源代码文件是使用git管理的，然后里面的theme/seeasy也是使用git管理的，于是出现了一个仓库中含有另一个仓库的情况。
当我在修改文件并且add时，出现了以下提示：</p>
<blockquote>
<p>hint: You&rsquo;ve added another git repository inside your current repository.
hint: Clones of the outer repository will not contain the contents of
hint: the embedded repository and will not know how to obtain it.
hint: If you meant to add a submodule, use:
hint:
hint: git submodule add themes/seeasy
hint:
hint: If you added this path by mistake, you can remove it from the
hint: index with:
hint:
hint: git rm &ndash;cached themes/seeasy
hint:
hint: See &ldquo;git help submodule&rdquo; for more information.
大意应该是我如果更新了主题seeasy，这个Hexo仓库是不会修改的，然后提示使用submoudle来解决这个问题。
这里<a href=https://git-scm.com/book/en/v2/Git-Tools-Submodules>https://git-scm.com/book/en/v2/Git-Tools-Submodules</a>介绍了有关Submodule的更详细的内容。</p>
</blockquote>
<p>对于这种情况，简单来说直接添加子模块就行：</p>
<pre tabindex=0><code>$ git submodule add git@github.com:YeQiu-YQ/seeasy.git themes/seeasy
'themes/seeasy' already exists in the index
</code></pre><p>提示已经存在，看来这条命令只能用来添加新的模块，使用<code>git submodule help</code>可以查看到有一个<code>set-url</code>，可以尝试一下：</p>
<pre tabindex=0><code class=language-git data-lang=git>$ git submodule set-url  themes/seeasy git@github.com:YeQiu-YQ/seeasy.git
</code></pre><p>这次没有返回信息，应该是没什么问题，试一下提交修改。</p>
<pre tabindex=0><code class=language-git data-lang=git>$ git commit -m &quot;Add PHP &amp;&amp; Git&quot;
[master 9eabede] Add PHP &amp;&amp; Git
 10 files changed, 237 insertions(+), 10 deletions(-)
 create mode 100644 .gitmodules
 create mode 100644 &quot;source/_posts/CTF-PHP\346\200\273\347\273\223.md&quot;
 create mode 100644 &quot;source/_posts/Git\351\227\256\351\242\230\346\261\207\346\200\273.md&quot;
 create mode 160000 themes/seeasy
</code></pre><p>可以看到成功提交，并且除了编写的文件外，还多了<code>.gitmodules</code>文件。其中保存着子模块的信息。</p>
</div>
</div>
<div class=w-200>
<div id=gitalk></div>
<script>var gitalk=new Gitalk({clientID:'9a04c6b451fbce76511d',clientSecret:'430c540c77ecd6b59749c60f0341c057bd5320a0',repo:'Causa1ity.github.io',owner:'Causa1ity',admin:'Causa1ity',id:'https://causality.top/misc/tools/git/',distractionFreeMode:!1});gitalk.render('gitalk')</script>
</div>
</div>
</div>
<script>CodeLine.initOnPageLoad({copyBtn:{show:!0,position:'top'},toggleBtn:{show:!1}})</script>
<div class="text-center my-8">
<span class="font-serif text-lg">
Powered By <a href=https://gohugo.io/ class="font-bold hover:text-blue-400">Hugo</a>
with theme <a href=https://github.com/causa1ity/hugo-theme-noth/ class="font-bold hover:text-blue-400">Noth</a>
</span>
</div></body>
</html>